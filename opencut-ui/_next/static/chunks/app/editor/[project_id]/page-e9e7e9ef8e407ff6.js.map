{"version":3,"file":"static/chunks/app/editor/[project_id]/page-e9e7e9ef8e407ff6.js","mappings":"+EAAA,uCAAqG,uNCoBtF,SAASA,IACtB,GAAM,YACJC,CAAU,cACVC,CAAY,CACZC,aAAW,UACXC,CAAQ,eACRC,CAAa,iBACbC,CAAe,gBACfC,CAAc,aACdC,CAAW,iBACXC,CAAe,oBACfC,CAAkB,CACnB,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,CAAaA,GAEX,eACJC,CAAa,aACbC,CAAW,kBACXC,CAAgB,oBAChBC,CAAkB,wBAClBC,CAAsB,CACvB,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,GACbC,EAASC,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,GAClBC,EAASC,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,GAClBC,EAAYJ,EAAOK,UAAU,CAgCnC,MA9BAC,CAAAA,EAAAA,EAAAA,CAAAA,CAAmBA,GAEnBC,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KAyBRC,CAxBoB,UAClB,GAAKJ,CAAD,EAKAV,OAAAA,CALY,CAKZA,KAAAA,EAAAA,EAAee,EAAAA,IAAOL,EAI1B,GAAI,CACF,GALEV,EAAiC,CAK7BC,EAAYS,EACpB,CAAE,MAAOM,EAAO,CAGd,GAAI,CACF,IAAMC,EAAe,MAAMf,EAAiB,oBAC5CM,EAAOU,OAAO,CAAC,WAAwB,OAAbD,GAC5B,CAAE,MAAOE,EAAa,CAEtB,CACF,EACF,GAGF,EAAG,CAACT,EAAWV,EAAeC,EAAaC,EAAkBM,EAAO,EAGlE,UAACY,EAAAA,CAAcA,CAAAA,UACb,WAACC,MAAAA,CAAIC,UAAU,0EACb,UAACC,EAAAA,CAAYA,CAAAA,CAAAA,GACb,UAACF,MAAAA,CAAIC,UAAU,kCACb,WAACE,EAAAA,EAAmBA,CAAAA,CAClBC,UAAU,WACVH,UAAU,wCAEV,UAACI,EAAAA,EAAcA,CAAAA,CACbC,YAAapC,EACbqC,QAAS,GACTC,QAAS,GACTC,SAAUnC,EACV2B,UAAU,mBAGV,WAACE,EAAAA,EAAmBA,CAAAA,CAClBC,UAAU,aACVH,UAAU,6CAGV,UAACI,EAAAA,EAAcA,CAAAA,CACbC,YAAatC,EACbuC,QAAS,GACTC,QAAS,GACTC,SAAUrC,EACV6B,UAAU,8BAEV,UAACS,EAAAA,CAAUA,CAAAA,CAAAA,KAGb,UAACC,EAAAA,EAAeA,CAAAA,CAACC,UAAU,MAG3B,UAACP,EAAAA,EAAcA,CAAAA,CACbC,YAAarC,EACbsC,QAAS,GACTE,SAAUpC,EACV4B,UAAU,kCAEV,UAACY,EAAAA,CAAYA,CAAAA,CAAAA,KAGf,UAACF,EAAAA,EAAeA,CAAAA,CAACC,UAAU,MAE3B,UAACP,EAAAA,EAAcA,CAAAA,CACbC,YAAa9B,EACb+B,QAAS,GACTC,QAAS,GACTC,SAAUhC,EACVwB,UAAU,8BAEV,UAACa,EAAAA,CAAeA,CAAAA,CAAAA,UAKtB,UAACH,EAAAA,EAAeA,CAAAA,CAACC,UAAU,MAG3B,UAACP,EAAAA,EAAcA,CAAAA,CACbC,YAAanC,EACboC,QAAS,GACTC,QAAS,GACTC,SAAUlC,EACV0B,UAAU,6BAEV,UAACc,EAAAA,CAAQA,CAAAA,CAAAA,UAIf,UAACC,EAAAA,CAAUA,CAAAA,CAAAA,OAInB","sources":["webpack://_N_E/?ba74","webpack://_N_E/./src/app/editor/[project_id]/page.tsx"],"sourcesContent":["import(/* webpackMode: \"eager\" */ \"I:\\\\OpenCut\\\\apps\\\\web\\\\src\\\\app\\\\editor\\\\[project_id]\\\\page.tsx\");\n","\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport {\r\n  ResizablePanelGroup,\r\n  ResizablePanel,\r\n  ResizableHandle,\r\n} from \"../../../components/ui/resizable\";\r\nimport { MediaPanel } from \"../../../components/editor/media-panel\";\r\nimport { PropertiesPanel } from \"../../../components/editor/properties-panel\";\r\nimport { Timeline } from \"../../../components/editor/timeline\";\r\nimport { PreviewPanel } from \"../../../components/editor/preview-panel\";\r\nimport { EditorHeader } from \"@/components/editor-header\";\r\nimport { usePanelStore } from \"@/stores/panel-store\";\r\nimport { useProjectStore } from \"@/stores/project-store\";\r\nimport { EditorProvider } from \"@/components/editor-provider\";\r\nimport { usePlaybackControls } from \"@/hooks/use-playback-controls\";\r\nimport { Onboarding } from \"@/components/onboarding\";\r\n\r\nexport default function Editor() {\r\n  const {\r\n    toolsPanel,\r\n    previewPanel,\r\n    mainContent,\r\n    timeline,\r\n    setToolsPanel,\r\n    setPreviewPanel,\r\n    setMainContent,\r\n    setTimeline,\r\n    propertiesPanel,\r\n    setPropertiesPanel,\r\n  } = usePanelStore();\r\n\r\n  const {\r\n    activeProject,\r\n    loadProject,\r\n    createNewProject,\r\n    isInvalidProjectId,\r\n    markProjectIdAsInvalid,\r\n  } = useProjectStore();\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const projectId = params.project_id as string;\r\n\r\n  usePlaybackControls();\r\n\r\n  useEffect(() => {\r\n    const initProject = async () => {\r\n      if (!projectId) {\r\n        return;\r\n      }\r\n\r\n      // Check if project is already loaded\r\n      if (activeProject?.id === projectId) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        await loadProject(projectId);\r\n      } catch (error) {\r\n        console.error(\"Failed to load project:\", error);\r\n        // Create a new project if loading fails\r\n        try {\r\n          const newProjectId = await createNewProject(\"Untitled Project\");\r\n          router.replace(`/editor/${newProjectId}`);\r\n        } catch (createError) {\r\n          console.error(\"Failed to create project:\", createError);\r\n        }\r\n      }\r\n    };\r\n\r\n    initProject();\r\n  }, [projectId, activeProject, loadProject, createNewProject, router]);\r\n\r\n  return (\r\n    <EditorProvider>\r\n      <div className=\"h-screen w-screen flex flex-col bg-background overflow-hidden\">\r\n        <EditorHeader />\r\n        <div className=\"flex-1 min-h-0 min-w-0\">\r\n          <ResizablePanelGroup\r\n            direction=\"vertical\"\r\n            className=\"h-full w-full gap-[0.18rem]\"\r\n          >\r\n            <ResizablePanel\r\n              defaultSize={mainContent}\r\n              minSize={30}\r\n              maxSize={85}\r\n              onResize={setMainContent}\r\n              className=\"min-h-0\"\r\n            >\r\n              {/* Main content area */}\r\n              <ResizablePanelGroup\r\n                direction=\"horizontal\"\r\n                className=\"h-full w-full gap-[0.19rem] px-3\"\r\n              >\r\n                {/* Tools Panel */}\r\n                <ResizablePanel\r\n                  defaultSize={toolsPanel}\r\n                  minSize={15}\r\n                  maxSize={40}\r\n                  onResize={setToolsPanel}\r\n                  className=\"min-w-0 rounded-sm\"\r\n                >\r\n                  <MediaPanel />\r\n                </ResizablePanel>\r\n\r\n                <ResizableHandle withHandle />\r\n\r\n                {/* Preview Area */}\r\n                <ResizablePanel\r\n                  defaultSize={previewPanel}\r\n                  minSize={30}\r\n                  onResize={setPreviewPanel}\r\n                  className=\"min-w-0 min-h-0 flex-1\"\r\n                >\r\n                  <PreviewPanel />\r\n                </ResizablePanel>\r\n\r\n                <ResizableHandle withHandle />\r\n\r\n                <ResizablePanel\r\n                  defaultSize={propertiesPanel}\r\n                  minSize={15}\r\n                  maxSize={40}\r\n                  onResize={setPropertiesPanel}\r\n                  className=\"min-w-0 rounded-sm\"\r\n                >\r\n                  <PropertiesPanel />\r\n                </ResizablePanel>\r\n              </ResizablePanelGroup>\r\n            </ResizablePanel>\r\n\r\n            <ResizableHandle withHandle />\r\n\r\n            {/* Timeline */}\r\n            <ResizablePanel\r\n              defaultSize={timeline}\r\n              minSize={15}\r\n              maxSize={70}\r\n              onResize={setTimeline}\r\n              className=\"min-h-0 px-3 pb-3\"\r\n            >\r\n              <Timeline />\r\n            </ResizablePanel>\r\n          </ResizablePanelGroup>\r\n        </div>\r\n        <Onboarding />\r\n      </div>\r\n    </EditorProvider>\r\n  );\r\n}\r\n\r\n"],"names":["Editor","toolsPanel","previewPanel","mainContent","timeline","setToolsPanel","setPreviewPanel","setMainContent","setTimeline","propertiesPanel","setPropertiesPanel","usePanelStore","activeProject","loadProject","createNewProject","isInvalidProjectId","markProjectIdAsInvalid","useProjectStore","params","useParams","router","useRouter","projectId","project_id","usePlaybackControls","useEffect","initProject","id","error","newProjectId","replace","createError","EditorProvider","div","className","EditorHeader","ResizablePanelGroup","direction","ResizablePanel","defaultSize","minSize","maxSize","onResize","MediaPanel","ResizableHandle","withHandle","PreviewPanel","PropertiesPanel","Timeline","Onboarding"],"sourceRoot":"","ignoreList":[]}